

# 设计思路

## 总体架构：

该系统分为三个模块：用户模块、部门模块、论坛模块

用户模块实现了注册、登录、权限校验功能

部门模块实现了招新信息、部门活动的发布、修改、删除、查看功能，实现了人事管理功能。

论坛模块实现了提问、回答、博客、评论的发布、修改、删除、查看、点赞功能。

实现技术：

1：用户模块使用JWT保存token信息实现自动登录的功能，使用“org.apache.commons”依赖实现邮箱验证功能。

2：部门模块与论坛模块使用Spring Boot与Mybatis完成功能开发。

3：前端部分：使用Vue框架,MVVM动态更新数据；使用xios第三方Http库,返回Promise对象,更好的处理接口数据；使用jQuery第三方工具函数库,配合Vue更好的操作Dom；使用Element-ui的UI组件库,使页面美观简洁；使用Vuex配合SessionStorage存储用户信息；用Vue-router管理用户跳转路由和根据用户权限动态添加路由。

## 数据库设计：

![img](./image/01.jpg)

## 程序流程图：

![img](./image/02.png)

# 重难点：

1：富文本的处理

  富文本主要用到了vue-quill-editor插件，处理富文本时，是根据用户输入的文字或者图片，将其转化为HTML标签，传输存储到数据库中， 由于因为vue-quill-editor上传图片时采用的是base64的编码格式，不利于存储，利用事件劫持，用formdata对象存储。

2：热榜的排行

  热榜显示的是三天之内的问题，这些问题将按照其下所有回答的点赞总数进行排行，点赞总数高者将排名靠前，且热榜最多显示五十条数据。

3：活动报名时并发数大于活动限制人数

  在业务逻辑层对判断参与人数和总和人数的方法进行加锁。用户点击参与活动，进行人数判断，当其他用户点击参与活动，进入等待，等前面用户判断完成时，其他用户再进行判断。当参与人员满时，判断为满，无法参加。

4：邮箱验证码的生成（随机字母+数字，算法）

  使用Math.random()方法随机生成两位数字，再创建一个包含了26个字母的字符数组，从中随机取出两个字符，两者进行组合产生一个包含了字母与数字的随机激活码。

5：前后端交互时的接口安全性验证（JWT）

  使用JWT来保证前后端交互的接口安全性验证。将用户的userId存放在token中并保存在请求头中，每个请求都需要验证token的合法性，同时还能通过userId查询到该用户的权限信息。

 

 

# 作品效果：

## 一：注册与登录

1：注册

需要填写个人信息，并且需要使用邮箱获取激活码

![img](./image/03.jpg)

2：登录

填写学号与密码即可登陆（Ps：这里的验证码可以随意填写）。

![img](./image/04.jpg)

## 二：部门

1：发布部门活动

填写相关活动信息，可以发布活动信息。

![img](./image/06.jpg)

2：看部门活动

在这里可以查看全校所有的公开的部门活动，并且可以点击报名申请

![img](./image/07.jpg)

## 三：微社区

1：热榜

热榜显示的是三天之内的问题，这些问题将按照其下所有回答的点赞总数进行排行，点赞总数高者将排名靠前，且热榜最多显示五十条数据。

![img](./image/08.jpg)

2：提问

在填写提问信息之后，可以发布问题。该问题会在【我的提问】中进行查看。提问者可以对问题进行“修改、删除”操作。若三天内该问题下所有回答的点赞数超过了【热榜】中的问题，则该问题将被推荐至首页热榜。

![img](./image/09.jpg)

3：回答

在问题详情页面，用户可以给问题提交回答。该问题下的所有回答会按照点赞数进行排行。同时，用户可以对自己发表的回答进行“修改、删除”操作。

![img](./image/10.jpg)

4：文章

用户可以在【文章】中发布自己的图文作品，发布的文字可以在【我的创作】中进行查看。用户可以在【我的创作】中对已经发布的文章进行“修改、删除”操作。

![img](./image/11.jpg)

5：点赞与收藏

用户可以对自己喜欢的问题、回答、文章进行点赞、收藏操作。被收藏的文章与问题可以在【我的收藏】中进行查看

![img](./image/12.jpg)

6：历史记录

在【我的足迹】中可以查看到最近三天，自己浏览过的所有文章，并且用户可以对该浏览记录进行删除操作。

![img](./image/13.jpg)

 



 







 